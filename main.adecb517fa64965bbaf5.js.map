{"version":3,"sources":["webpack:///./js/createIndex.js","webpack:///./js/referals.js","webpack:///./js/apiService.js","webpack:///./js/load-more-button.js","webpack:///./js/modalShowHandler.js","webpack:///./js/main.js","webpack:///./templates/gallery-item.hbs","webpack:///./templates/form.hbs","webpack:///./templates/modal.hbs"],"names":["document","body","insertAdjacentHTML","searchForm","form","getElementById","gallery","querySelector","intersectionObserverTriger","searchQuery","apiKey","filter","itemsPerPage","page","imageSearch","url","this","fetch","then","response","json","hits","incrementPage","catch","resetPage","newQuery","loadMoreBtn","refs","button","spinner","btnLabel","enable","disabled","textContent","classList","add","disable","remove","show","modalShowHandler","event","target","nodeName","basicLightbox","modalImg","set","dataset","defaultModules","PNotifyMobile","myStack","Stack","dir1","dir2","firstpos1","firstpos2","context","noticeOptions","title","text","stack","delay","observer","IntersectionObserver","entries","forEach","entry","intersectionRatio","apiService","query","offsetHeight","fetchImages","root","threshold","rootMargin","updateMarkup","markup","galleryItems","notice","addEventListener","preventDefault","currentTarget","elements","value","innerHTML","reset","observe","Handlebars","module","exports","template","container","depth0","helpers","partials","data","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop","helper","hooks","helperMissing"],"mappings":"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","file":"main.adecb517fa64965bbaf5.js","sourcesContent":["import searchForm from '../templates/form.hbs';\r\n// import gallery from '../templates/gallery.hbs';\r\n// import galleryItems from '../templates/gallery-items.hbs';\r\n\r\n\r\n// const markupGallery = gallery(galleryItems());\r\n// console.log(searchForm());\r\ndocument.body.insertAdjacentHTML('afterbegin', searchForm());\r\n","const body = document.body;\r\nconst form = document.getElementById('search-form');\r\nconst gallery = document.querySelector('.gallery');\r\nconst intersectionObserverTriger = document.querySelector(\r\n  '.intersection-observer-triger',\r\n);\r\nexport default { body, form, gallery, intersectionObserverTriger };\r\n","const key = '19923655-1a3b53a89179877892e074405';\r\n\r\nexport default {\r\n  searchQuery: '',\r\n  apiKey: key,\r\n  filter: 'image_type=photo&orientation=horizontal',\r\n  itemsPerPage: 12,\r\n  page: 1,\r\n\r\n  imageSearch() {\r\n    const url = `https://pixabay.com/api/?q=${this.searchQuery}&${this.filter}&per_page=${this.itemsPerPage}&page=${this.page}&key=${this.apiKey}`;\r\n    return fetch(url)\r\n      .then(response => {\r\n        // console.log(response);\r\n        return response.json();\r\n      })\r\n      .then(({ hits }) => {\r\n        this.incrementPage();\r\n        return hits;\r\n      })\r\n      .catch();\r\n  },\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n  incrementPage() {\r\n    this.page += 1;\r\n  },\r\n  get query() {\r\n    return this.searchQuery;\r\n  },\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  },\r\n};\r\n","const loadMoreBtn = {\r\n  refs: {\r\n    button: document.querySelector('.button[data-action=\"load-more\"]'),\r\n    spinner: document.querySelector('#spinner'),\r\n    btnLabel: document.querySelector('.label'),\r\n  },\r\n  enable() {\r\n    this.refs.button.disabled = false;\r\n    this.refs.btnLabel.textContent = 'Load more';\r\n    this.refs.spinner.classList.add('is-hidden');\r\n  },\r\n  disable() {\r\n    this.refs.button.disabled = true;\r\n    this.refs.btnLabel.textContent = '  ...loading';\r\n    this.refs.spinner.classList.remove('is-hidden');\r\n  },\r\n  show() {\r\n    this.refs.button.classList.remove('is-hidden');\r\n  },\r\n};\r\nexport default loadMoreBtn;\r\n","import modalImg from '../templates/modal.hbs';\r\n// added basickLightbox--------------------------------------\r\nimport * as basicLightbox from 'basiclightbox';\r\nimport 'basiclightbox/src/styles/main.scss';\r\n//-----------------------------------------------------------\r\n\r\nconst modalShowHandler = event => {\r\n  if (event.target.nodeName === 'IMG') {\r\n    // console.dir(event.target);\r\n    // console.log(event.target);\r\n    // console.dir(event.target.dataset.set);\r\n    // console.log(modalImg({ set: event.target.dataset.set }));\r\n    const modal = basicLightbox.create(\r\n      modalImg({ set: event.target.dataset.set }),\r\n    );\r\n    // console.dir(modal);\r\n    modal.show();\r\n  }\r\n};\r\n\r\nexport default modalShowHandler;\r\n","// added PNotify ------------------------------------------------------------\r\nimport '@pnotify/core/dist/BrightTheme.css';\r\nimport '@pnotify/core/dist/Material.css';\r\nimport 'material-design-icons/iconfont/material-icons.css';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport '@pnotify/mobile/dist/PNotifyMobile.css';\r\n\r\nimport {\r\n  notice,\r\n  error,\r\n  defaultModules,\r\n  // defaults,\r\n  Stack,\r\n} from '@pnotify/core/dist/PNotify.js';\r\nimport * as PNotifyMobile from '@pnotify/mobile/dist/PNotifyMobile.js';\r\ndefaultModules.set(PNotifyMobile, {});\r\n\r\nconst myStack = new Stack({\r\n  dir1: 'down',\r\n  dir2: 'left',\r\n  firstpos1: 25,\r\n  firstpos2: 30,\r\n  context: document.body,\r\n});\r\nconst noticeOptions = {\r\n  title: 'Serching for images',\r\n  text: 'Awaiting while downloading images from server',\r\n  stack: myStack,\r\n  delay: 2000,\r\n};\r\nconst errorOptions = {\r\n  itle: 'Ups, no response',\r\n  text: '',\r\n  stack: myStack,\r\n  delay: 2000,\r\n};\r\n//-----------------------------------------------------------\r\n\r\nimport refs from './referals';\r\n// import options from './serchOptions';\r\nimport apiService from './apiService';\r\nimport loadMoreBtn from './load-more-button';\r\n// import updateMarkup from './updateMarkup';\r\nimport galleryItems from '../templates/gallery-item.hbs';\r\nimport modalShowHandler from './modalShowHandler';\r\n\r\n//intersectionObserver---------------------\r\nconst options = {\r\n  root: null,\r\n  threshold: 1,\r\n  rootMargin: '200px',\r\n};\r\nconst observer = new IntersectionObserver(entries => {\r\n  entries.forEach(entry => {\r\n    if (entry.intersectionRatio > 0) {\r\n      if (apiService.query !== '' && document.body.offsetHeight > 1000) {\r\n        fetchImages();\r\n      }\r\n    }\r\n  });\r\n}, options);\r\n//----------------------------------------\r\n// scroll---------------------------------\r\n// const scrolOption = {\r\n//   top: 100,\r\n// };\r\n//scroll function-------------------------\r\n// const scrollImage = () => {\r\n//   setTimeout(() => {\r\n//     // console.log(scrolOption.top);\r\n//     // console.dir(document.body.offsetHeight);\r\n//     scrolOption.top = document.body.offsetHeight;\r\n//     window.scrollTo(scrolOption);\r\n//   }, 1700);\r\n// };\r\n// updateMarkUp----------------------------------\r\nconst updateMarkup = hits => {\r\n  //   console.dir(data);\r\n  const markup = galleryItems(hits);\r\n  //   console.dir(referal.gallery);\r\n  //   console.dir(markup);\r\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\r\n  loadMoreBtn.enable();\r\n  loadMoreBtn.show();\r\n\r\n  return hits;\r\n};\r\n//-------------------------------------------------\r\n//-fetchImages--- main fetch()-----------------------------------\r\nfunction fetchImages() {\r\n  loadMoreBtn.disable();\r\n\r\n  //notice call------------------------\r\n  notice(noticeOptions);\r\n  //-----------------------------------\r\n  apiService.imageSearch().then(updateMarkup);\r\n  // .catch(eror => {\r\n  //   console.dir(eror);\r\n  //   error({ ...errorOptions, text: eror.message });\r\n  // });\r\n  // .finally(scrollImage);\r\n}\r\n// load more btn handler----------------\r\n// const btnLoadMoreHandler = event => {\r\n//   fetchImages();\r\n// };\r\n//------------------------------------------\r\n//submit handler-------------------------------\r\nconst submitHandler = event => {\r\n  event.preventDefault();\r\n  const form = event.currentTarget;\r\n  apiService.query = form.elements.query.value;\r\n  refs.gallery.innerHTML = '';\r\n  form.reset();\r\n  apiService.resetPage();\r\n  fetchImages();\r\n};\r\n//----------------------------------------------\r\n\r\nrefs.form.addEventListener('submit', submitHandler);\r\n// btn load more------------------------------------------\r\n// loadMoreBtn.refs.button.addEventListener('click', btnLoadMoreHandler);\r\n// gallery click modal ------------------------------------------------\r\nrefs.gallery.addEventListener('click', modalShowHandler);\r\n\r\n//---------------------------------------------------------------------\r\nobserver.observe(refs.intersectionObserverTriger);\r\n//  observer.unobserve(refs.intersectionObserverTriger);\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li>\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img class=\\\"image\\\" src=\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \" alt=\\\"some image\\\" data-set=\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0), depth0))\n    + \" width=\\\"320\\\" />\\r\\n\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<form class=\\\"search-form\\\" id=\\\"search-form\\\">\\r\\n    <input type=\\\"text\\\" name=\\\"query\\\" autocomplete=\\\"off\\\" placeholder=\\\"Search images...\\\" />\\r\\n</form>\";\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<img src=\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"set\") || (depth0 != null ? lookupProperty(depth0,\"set\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"set\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":9},\"end\":{\"line\":1,\"column\":16}}}) : helper)))\n    + \" alt=\\\"modal some image\\\">\";\n},\"useData\":true});"],"sourceRoot":""}